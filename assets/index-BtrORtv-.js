import{_ as i}from"./index-BIML_LO1.js";import{m as v,o as y,r as x,j as e,t as T}from"./vendor-CWQ_kcPY.js";import{I as a,t as N}from"./index-CpkLUTZu.js";class w{todos=[];constructor(){v(this,{},{autoBind:!0})}addTodo(o,t){this.todos.push({id:Date.now(),content:o,done:t})}toggleTodo(o){const t=this.todos.find(d=>d.id===o);t&&(t.done=!t.done)}removeTodo(o){this.todos=this.todos.filter(t=>t.id!==o)}get doneTodosCnt(){return this.todos.filter(o=>o.done).length}get undoneTodosCnt(){return this.todos.filter(o=>!o.done).length}}const E=new w,D=y(()=>{const{todos:n,addTodo:o,toggleTodo:t,removeTodo:d,doneTodosCnt:m,undoneTodosCnt:h}=E,p=[],u=async(s,j)=>{const f=Object.fromEntries(j),r=await N.safeParseAsync(f);if(r.success){const{content:_,done:b}=r.data;o(_,b);const l=T(n);return console.log(s,"=>",l),l}throw r.error},[c,g]=x.useActionState(u,p);return x.useEffect(()=>{console.log("useActionState",c)},[c]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:["Done todos count: ",m]}),e.jsxs("div",{children:["Undone todos count: ",h]}),e.jsx("ul",{className:"flex flex-col gap-2",children:n.map(s=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"border",type:"checkbox",checked:s.done,onChange:()=>t(s.id)}),e.jsx("span",{style:{textDecoration:s.done?"line-through":"none"},children:s.content}),e.jsx("button",{onClick:()=>d(s.id),children:"Delete"})]},s.id))}),e.jsx("div",{className:"space-y-4",children:e.jsxs("form",{action:g,className:"flex gap-2",children:[e.jsx("input",{type:"text",name:"content",className:"border"}),e.jsx("input",{type:"radio",name:"done"}),e.jsx("button",{type:"submit",children:"Add todo"})]})}),e.jsxs("div",{className:"flex justify-between gap-12",children:[e.jsxs("div",{children:[e.jsx("p",{className:"bg-green-200",children:"@/stores/mobx/index.ts"}),e.jsx(a,{dynamicRawImport:()=>i(()=>import("./index-CW8jAc0f.js"),[]),showLineNo:!0,lang:"typescript"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"bg-green-200",children:"@/stores/mobx/v2/index.ts"}),e.jsx(a,{dynamicRawImport:()=>i(()=>import("./index-EdK-ZFLn.js"),[]),showLineNo:!0,lang:"typescript"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"bg-green-200",children:"@/pages/mobx/index.tsx"}),e.jsx(a,{dynamicRawImport:()=>i(()=>import("./index-C1jtbVDm.js"),[]),showLineNo:!0,lang:"tsx"})]})]})]})});export{D as default};
