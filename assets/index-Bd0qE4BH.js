import{_ as c}from"./index-B_TUN_wG.js";import{m as T,o as _,r as l,j as o,t as y}from"./vendor-BIbJKmDe.js";import{I as m,t as N}from"./index-k38Q5PoR.js";class w{todos=[];constructor(){T(this,{},{autoBind:!0})}addTodo(e,t){this.todos.push({id:Date.now(),content:e,done:t})}toggleTodo(e){const t=this.todos.find(d=>d.id===e);t&&(t.done=!t.done)}removeTodo(e){this.todos=this.todos.filter(t=>t.id!==e)}get doneTodosCnt(){return this.todos.filter(e=>e.done).length}get undoneTodosCnt(){return this.todos.filter(e=>!e.done).length}}const A=new w,C=_(()=>{const{todos:n,addTodo:e,toggleTodo:t,removeTodo:d,doneTodosCnt:x,undoneTodosCnt:h}=A,u=[],p=async(s,f)=>{const j=Object.fromEntries(f),r=await N.safeParseAsync(j);if(r.success){const{content:b,done:v}=r.data;e(b,v);const a=y(n);return console.log(s,"=>",a),a}throw r.error},[i,g]=l.useActionState(p,u);return l.useEffect(()=>{console.log("useActionState",i)},[i]),o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:["Done todos count: ",x]}),o.jsxs("div",{children:["Undone todos count: ",h]}),o.jsx("ul",{className:"flex flex-col gap-2",children:n.map(s=>o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx("input",{className:"border",type:"checkbox",checked:s.done,onChange:()=>t(s.id)}),o.jsx("span",{style:{textDecoration:s.done?"line-through":"none"},children:s.content}),o.jsx("button",{onClick:()=>d(s.id),children:"Delete"})]},s.id))}),o.jsx("div",{className:"space-y-4",children:o.jsxs("form",{action:g,className:"flex gap-2",children:[o.jsx("input",{type:"text",name:"content",className:"border"}),o.jsx("input",{type:"radio",name:"done"}),o.jsx("button",{type:"submit",children:"Add todo"})]})}),o.jsx("div",{className:"bg-green-200",children:"@/stores/mobx/index.ts"}),o.jsx(m,{dynamicRawImport:()=>c(()=>import("./index-CW8jAc0f.js"),[]),showLineNo:!0,lang:"typescript"}),o.jsx("div",{className:"bg-green-200",children:"@/stores/mobx/v2/index.ts"}),o.jsx(m,{dynamicRawImport:()=>c(()=>import("./index-EdK-ZFLn.js"),[]),showLineNo:!0,lang:"typescript"})]})});export{C as default};
