import{_ as p}from"./index-4Kwj7ogC.js";import{e as r,f as l,g as m,h as w,r as h,j as e}from"./vendor-BIbJKmDe.js";import{I as j,t as E}from"./index-DkKoEsKs.js";const n=r([]),I=r(null,(t,o,a,d)=>{const s=t(n);o(n,[...s,{id:Date.now(),content:a,done:d}])}),S=r(null,(t,o,a)=>{const d=t(n);o(n,d.map(s=>s.id===a?{...s,done:!s.done}:s))}),C=r(null,(t,o,a)=>{const d=t(n);o(n,d.filter(s=>s.id!==a))}),D=r(t=>t(n).filter(o=>o.done).length),R=r(t=>t(n).filter(o=>!o.done).length);function O(){const t=l(n),o=l(D),a=l(R),d=m(I),s=m(S),g=m(C),f=w(),A=[],_=async(c,T)=>{const v=Object.fromEntries(T),i=await E.safeParseAsync(v);if(i.success){const{content:N,done:b}=i.data;d(N,b);const u=f.get(n);return console.log(c,"=>",u),u}throw i.error},[x,y]=h.useActionState(_,A);return h.useEffect(()=>{console.log("useActionState",x)},[x]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:["Done todos count: ",o]}),e.jsxs("div",{children:["Undone todos count: ",a]}),e.jsx("ul",{className:"flex flex-col gap-2",children:t.map(c=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"border",type:"checkbox",checked:c.done,onChange:()=>s(c.id)}),e.jsx("span",{style:{textDecoration:c.done?"line-through":"none"},children:c.content}),e.jsx("button",{onClick:()=>g(c.id),children:"Delete"})]},c.id))}),e.jsx("div",{className:"space-y-4",children:e.jsxs("form",{action:y,className:"flex gap-2",children:[e.jsx("input",{type:"text",name:"content",className:"border"}),e.jsx("input",{type:"radio",name:"done"}),e.jsx("button",{type:"submit",children:"Add todo"})]})}),e.jsxs("div",{className:"flex justify-between gap-12",children:[e.jsxs("div",{children:[e.jsx("p",{className:"bg-green-200",children:"@/stores/jotai/index.ts"}),e.jsx(j,{dynamicRawImport:()=>p(()=>import("./index-D4y132no.js"),[]),showLineNo:!0,lang:"typescript"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"bg-green-200",children:"@/page/jotai/index.tsx"}),e.jsx(j,{dynamicRawImport:()=>p(()=>import("./index-IDS9xeDG.js"),[]),showLineNo:!0,lang:"tsx"})]})]})]})}export{O as default};
